var countries={1:"Ukraine",2:"Germany",3:"France",4:"Spain",5:"Sweden",6:"USA",7:"Canada",8:"Moldova",9:"Belarus",10:"Poland"},cities={1:{country:1,name:"Ukraine"},2:{country:3,name:"Paris"},3:{country:4,name:"Madrid"},4:{country:6,name:"Houston"},5:{country:7,name:"Montreal"},6:{country:8,name:"Кишинев"},7:{country:9,name:"Minsk"},8:{country:10,name:"Warsaw"},100:{country:1,name:"Львов"},101:{country:1,name:"Николаев"},103:{country:1,name:"Переяслав-Хмельницкий"},104:{country:1,name:"Каменец-Подольский"},105:{country:1,name:"Donetsk"},106:{country:1,name:"Kharkov"},107:{country:1,name:"Луцк"},108:{country:1,name:"Poltava"},109:{country:1,name:"Черновцы"},299:{country:1,name:"Чернигов"},333:{country:1,name:"Чернигов"}};$(function(){function e(e){function t(e){return r=!1,""==e?($(".name").css({border:"1px solid #ff0000"}),$(".alert-name").show(),r=!1):($(".name").css({border:"0"}),$(".alert-name").hide()),r}function a(e){r=!1;var t=/^[a-z0-9_-]+@[a-z0-9-]+\.([a-z]{1,6}\.)?[a-z]{2,6}$/i;return""==e?($(".email").css({border:"1px solid #ff0000"}),$(".alert-email").show(),r=!1):($(".email").css({border:"0"}),$(".alert-email").hide(),0==e.search(t)?r=!0:($(".email").css({border:"1px solid #ff0000"}),$(".alert-email-wr").show(),$($(".email")).val(""),r=!1)),r}function o(){for(var e in countries)if(countries.hasOwnProperty(e)){var t=$("<option></option>");$(t).val(e),$(t).html(countries[e]),$("#country").append(t)}$("#country").change(function(){var e=this.options[this.selectedIndex],t=$(e).html();localStorage.setItem("country",t);for(var n=$(e).val(),a=$("#city");a.children().length>1;)a.children().last().remove();for(var r in cities)if(cities.hasOwnProperty(r)&&cities[r].country==n){var o=$("<option></option>");$(o).val(r),$(o).html(cities[r].name),$("#city").append(o)}}),$("#city").change(function(){var e=this.options[this.selectedIndex],t=$(e).html();localStorage.setItem("city",t)})}function s(){r=!1,null==$("#country").val()?($("#country").css({border:"1px solid #ff0000"}),$(".alert-country").show(),r=!1):($("#country").css({border:"0"}),$(".alert-country").hide(),r=!0)}function c(e){$('input[type="text"]').hide(),$(e).find('input[type="checkbox"]').on("click",function(){if($(this).is(":checked")){var e=$(this).attr("id"),t=$(this).parent().find('input[type="text"]');t.addClass(e),$(t).show()}else $(this).parent().find('input[type="text"]').hide()})}function i(e){if(r=!1,0==$(e).find("input:checked").length){var t=$('<span class="alert">Пожалуйста выберите соц.сеть</span>');$(e).find("form").append(t),r=!1}else $(e).find(".alert").remove(),$(e).find("input:checked").parent().find('input[type="text"]').each(function(){var e=$(this).val(),t=$(this).parent().find('input[type="checkbox"]').attr("id");if(""==e){$(this).parent().find(".alert-social").remove(),$(this).css({border:"1px solid #ff0000"});var n=$('<span class="alert alert-social">Поле должно быть заполнено.</span>');$(this).parent().append(n),r=!1}else $(this).css({border:"0"}),$(this).parent().find(".alert-social").remove(),localStorage.setItem(t,e),r=!0});return r}function l(){}function u(){}$(".alert").hide(),this.start=function(){r=!1;var e=$(".current-step");console.log(e),$(e).hasClass("first")?(console.log("first"),n.on("click",function(){var e=$(".name").val();t(e);var n=$(".email").val();a(n),localStorage.setItem("name",e),localStorage.setItem("email",n)})):$(e).hasClass("second")?(console.log("second"),o(),n.on("click",function(){s(),console.log(localStorage.getItem("country")),console.log(localStorage.getItem("city"))})):$(e).hasClass("third")?(console.log("three"),c($(".third")),n.on("click",function(){i($(".third"))})):$(e).hasClass("fourth")&&(console.log("four"),l(),n.on("click",function(){u()}))},this.reset=function(){r=!1,localStorage.clear(),$(".step").hide().removeClass("current-step"),$(".first").addClass("current-step").show()},this.showResult=function(){var e={};e.name=localStorage.getItem("name"),e.email=localStorage.getItem("email"),e.country=localStorage.getItem("country"),e.city=localStorage.getItem("city"),e.social=[];for(var t=$(".third").find("input:checked"),n=0;n<t.length;n++){var a=$(t[n]).attr("id");e.social[n]=localStorage.getItem(a)}return console.log(e),e}}var t=$(".prev"),n=$(".next"),a=new e(".content");a.start();var r;t.on("click",function(){console.log($(".current-step")),$(".current-step").hasClass(".first")||($(".current-step").removeClass("current-step").hide().prev().show().addClass("current-step"),$(".current-page").removeClass("current-page").prev().removeClass("passed-page").addClass("current-page"),a.start())}),n.on("click",function(){r&&(console.log($(".current-step")),$(".current-step").hasClass("fourth")?a.showResult():($(".current-step").hasClass("third")&&n.addClass("finish").html("Завершить"),$(".current-step").removeClass("current-step").hide().next().show().addClass("current-step"),$(".current-page").removeClass("current-page").addClass("passed-page").next().addClass("current-page"),a.start()))})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJjb3VudHJpZXMiLCIxIiwiMiIsIjMiLCI0IiwiNSIsIjYiLCI3IiwiOCIsIjkiLCIxMCIsImNpdGllcyIsImNvdW50cnkiLCJuYW1lIiwiMTAwIiwiMTAxIiwiMTAzIiwiMTA0IiwiMTA1IiwiMTA2IiwiMTA3IiwiMTA4IiwiMTA5IiwiMjk5IiwiMzMzIiwiJCIsIkFua2V0YSIsImVsZW0iLCJuYW1lQ2hlY2siLCIkZmxhZyIsImNzcyIsImJvcmRlciIsInNob3ciLCJoaWRlIiwiZW1haWxDaGVjayIsIm1haWwiLCJwYXR0ZXJuIiwic2VhcmNoIiwidmFsIiwic2VsZWN0TG9jYXRpb24iLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIiRvcHRpb24iLCJodG1sIiwiYXBwZW5kIiwiY2hhbmdlIiwiJHNlbGVjdGVkIiwidGhpcyIsIm9wdGlvbnMiLCJzZWxlY3RlZEluZGV4IiwiJGNvdW50cnkiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiJHNlbGVjdGVkQ291bnRyeSIsIiRpdGVtIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJsYXN0IiwicmVtb3ZlIiwiJGNpdHkiLCJsb2NhdGlvbkNoZWNrIiwic29jaWFsSW5wdXQiLCJ0YXJnZXQiLCJmaW5kIiwib24iLCJpcyIsIiRpZCIsImF0dHIiLCIkaW5wdXQiLCJwYXJlbnQiLCJhZGRDbGFzcyIsInNvY2lhbElucHV0Q2hlY2siLCIkYWxlcnRFbXB0eSIsImVhY2giLCIkaW5wdXRUZXh0IiwiJGFsZXJ0IiwiaW1nQ2hvb3NlIiwiaW1nQ2hlY2siLCJzdGFydCIsIiRjdXJyZW50IiwiY29uc29sZSIsImxvZyIsImhhc0NsYXNzIiwiJG5leHRCdXR0b24iLCIkbmFtZSIsIiRlbWFpbCIsImdldEl0ZW0iLCJyZXNldCIsImNsZWFyIiwicmVtb3ZlQ2xhc3MiLCJzaG93UmVzdWx0IiwicmVzdWx0IiwiZW1haWwiLCJjaXR5Iiwic29jaWFsIiwiY2hlY2tlZCIsImkiLCJpZCIsIiRw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QUFBLGdCQUNBN0MsRUFBQSxpQkFBQWdFLFlBQUEsZ0JBQUFuQixTQUFBLGVBQUErQixPQUFBL0IsU0FBQSxnQkFDQTZCLEVBQUFyQiIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGNvdW50cmllcyA9IHtcbiAgICBcIjFcIjogXCJVa3JhaW5lXCIsXG4gICAgXCIyXCI6IFwiR2VybWFueVwiLFxuICAgIFwiM1wiOiBcIkZyYW5jZVwiLFxuICAgIFwiNFwiOiBcIlNwYWluXCIsXG4gICAgXCI1XCI6IFwiU3dlZGVuXCIsXG4gICAgXCI2XCI6IFwiVVNBXCIsXG4gICAgXCI3XCI6IFwiQ2FuYWRhXCIsXG4gICAgXCI4XCI6IFwiTW9sZG92YVwiLFxuICAgIFwiOVwiOiBcIkJlbGFydXNcIixcbiAgICBcIjEwXCI6IFwiUG9sYW5kXCJcbn07XG5cbnZhciBjaXRpZXMgPSB7XG4gICAgXCIxXCI6IHtcImNvdW50cnlcIjogMSwgXCJuYW1lXCI6IFwiVWtyYWluZVwifSxcbiAgICBcIjJcIjoge1wiY291bnRyeVwiOiAzLCBcIm5hbWVcIjogXCJQYXJpc1wifSxcbiAgICBcIjNcIjoge1wiY291bnRyeVwiOiA0LCBcIm5hbWVcIjogXCJNYWRyaWRcIn0sXG4gICAgXCI0XCI6IHtcImNvdW50cnlcIjogNiwgXCJuYW1lXCI6IFwiSG91c3RvblwifSxcbiAgICBcIjVcIjoge1wiY291bnRyeVwiOiA3LCBcIm5hbWVcIjogXCJNb250cmVhbFwifSxcbiAgICBcIjZcIjoge1wiY291bnRyeVwiOiA4LCBcIm5hbWVcIjogXCLQmtC40YjQuNC90LXQslwifSxcbiAgICBcIjdcIjoge1wiY291bnRyeVwiOiA5LCBcIm5hbWVcIjogXCJNaW5za1wifSxcbiAgICBcIjhcIjoge1wiY291bnRyeVwiOiAxMCwgXCJuYW1lXCI6IFwiV2Fyc2F3XCJ9LFxuICAgIFwiMTAwXCI6IHtcImNvdW50cnlcIjogMSwgXCJuYW1lXCI6IFwi0JvRjNCy0L7QslwifSxcbiAgICBcIjEwMVwiOiB7XCJjb3VudHJ5XCI6IDEsIFwibmFtZVwiOiBcItCd0LjQutC+0LvQsNC10LJcIn0sXG4gICAgXCIxMDNcIjoge1wiY291bnRyeVwiOiAxLCBcIm5hbWVcIjogXCLQn9C10YDQtdGP0YHQu9Cw0LIt0KXQvNC10LvRjNC90LjRhtC60LjQuVwifSxcbiAgICBcIjEwNFwiOiB7XCJjb3VudHJ5XCI6IDEsIFwibmFtZVwiOiBcItCa0LDQvNC10L3QtdGGLdCf0L7QtNC+0LvRjNGB0LrQuNC5XCJ9LFxuICAgIFwiMTA1XCI6IHtcImNvdW50cnlcIjogMSwgXCJuYW1lXCI6IFwiRG9uZXRza1wifSxcbiAgICBcIjEwNlwiOiB7XCJjb3VudHJ5XCI6IDEsIFwibmFtZVwiOiBcIktoYXJrb3ZcIn0sXG4gICAgXCIxMDdcIjoge1wiY291bnRyeVwiOiAxLCBcIm5hbWVcIjogXCLQm9GD0YbQulwifSxcbiAgICBcIjEwOFwiOiB7XCJjb3VudHJ5XCI6IDEsIFwibmFtZVwiOiBcIlBvbHRhdmFcIn0sXG4gICAgXCIxMDlcIjoge1wiY291bnRyeVwiOiAxLCBcIm5hbWVcIjogXCLQp9C10YDQvdC+0LLRhtGLXCJ9LFxuICAgIFwiMjk5XCI6IHtcImNvdW50cnlcIjogMSwgXCJuYW1lXCI6IFwi0KfQtdGA0L3QuNCz0L7QslwifSxcbiAgICBcIjMzM1wiOiB7XCJjb3VudHJ5XCI6IDEsIFwibmFtZVwiOiBcItCn0LXRgNC90LjQs9C+0LJcIn1cbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIC8vdmFyaWFibGVzXG4gICAgdmFyICRwcmV2QnV0dG9uID0gJCgnLnByZXYnKTtcbiAgICB2YXIgJG5leHRCdXR0b24gPSAkKCcubmV4dCcpO1xuICAgIHZhciBhbmtldGEgPSBuZXcgQW5rZXRhKCcuY29udGVudCcpO1xuICAgIGFua2V0YS5zdGFydCgpO1xuICAgIHZhciAkZmxhZztcblxuICAgIC8vY29udHJvbEJ1dHRvbnNcbiAgICAkcHJldkJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCQoJy5jdXJyZW50LXN0ZXAnKSk7XG4gICAgICAgIGlmICghKCQoJy5jdXJyZW50LXN0ZXAnKS5oYXNDbGFzcygnLmZpcnN0JykpKSB7XG4gICAgICAgICAgICAkKCcuY3VycmVudC1zdGVwJykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQtc3RlcCcpLmhpZGUoKS5wcmV2KCkuc2hvdygpLmFkZENsYXNzKCdjdXJyZW50LXN0ZXAnKTtcbiAgICAgICAgICAgICQoJy5jdXJyZW50LXBhZ2UnKS5yZW1vdmVDbGFzcygnY3VycmVudC1wYWdlJykucHJldigpLnJlbW92ZUNsYXNzKCdwYXNzZWQtcGFnZScpLmFkZENsYXNzKCdjdXJyZW50LXBhZ2UnKTtcbiAgICAgICAgICAgIGFua2V0YS5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkbmV4dEJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkZmxhZykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJCgnLmN1cnJlbnQtc3RlcCcpKTtcbiAgICAgICAgICAgIGlmICghKCQoJy5jdXJyZW50LXN0ZXAnKS5oYXNDbGFzcygnZm91cnRoJykpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCgkKCcuY3VycmVudC1zdGVwJykuaGFzQ2xhc3MoJ3RoaXJkJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICRuZXh0QnV0dG9uLmFkZENsYXNzKCdmaW5pc2gnKS5odG1sKCfQl9Cw0LLQtdGA0YjQuNGC0YwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJCgnLmN1cnJlbnQtc3RlcCcpLnJlbW92ZUNsYXNzKCdjdXJyZW50LXN0ZXAnKS5oaWRlKCkubmV4dCgpLnNob3coKS5hZGRDbGFzcygnY3VycmVudC1zdGVwJyk7XG4gICAgICAgICAgICAgICAgJCgnLmN1cnJlbnQtcGFnZScpLnJlbW92ZUNsYXNzKCdjdXJyZW50LXBhZ2UnKS5hZGRDbGFzcygncGFzc2VkLXBhZ2UnKS5uZXh0KCkuYWRkQ2xhc3MoJ2N1cnJlbnQtcGFnZScpO1xuICAgICAgICAgICAgICAgIGFua2V0YS5zdGFydCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbmtldGEuc2hvd1Jlc3VsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvL2NvbnN0cnVjdG9yXG4gICAgZnVuY3Rpb24gQW5rZXRhKGVsZW0pIHtcbiAgICAgICAgJCgnLmFsZXJ0JykuaGlkZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIG5hbWVDaGVjayhuYW1lKSB7XG4gICAgICAgICAgICAkZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG5hbWUgPT0gJycpIHtcbiAgICAgICAgICAgICAgICAkKCcubmFtZScpLmNzcyh7J2JvcmRlcic6ICcxcHggc29saWQgI2ZmMDAwMCd9KTtcbiAgICAgICAgICAgICAgICAkKCcuYWxlcnQtbmFtZScpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcubmFtZScpLmNzcyh7J2JvcmRlcic6ICcwJ30pO1xuICAgICAgICAgICAgICAgICQoJy5hbGVydC1uYW1lJykuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICRmbGFnO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZW1haWxDaGVjayhtYWlsKSB7XG4gICAgICAgICAgICAkZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSAvXlthLXowLTlfLV0rQFthLXowLTktXStcXC4oW2Etel17MSw2fVxcLik/W2Etel17Miw2fSQvaTtcblxuICAgICAgICAgICAgaWYgKG1haWwgPT0gJycpIHtcbiAgICAgICAgICAgICAgICAkKCcuZW1haWwnKS5jc3Moeydib3JkZXInOiAnMXB4IHNvbGlkICNmZjAwMDAnfSk7XG4gICAgICAgICAgICAgICAgJCgnLmFsZXJ0LWVtYWlsJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICRmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5lbWFpbCcpLmNzcyh7J2JvcmRlcic6ICcwJ30pO1xuICAgICAgICAgICAgICAgICQoJy5hbGVydC1lbWFpbCcpLmhpZGUoKTtcblxuICAgICAgICAgICAgICAgIGlmIChtYWlsLnNlYXJjaChwYXR0ZXJuKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICRmbGFnID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5lbWFpbCcpLmNzcyh7J2JvcmRlcic6ICcxcHggc29saWQgI2ZmMDAwMCd9KTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFsZXJ0LWVtYWlsLXdyJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAkKCQoJy5lbWFpbCcpKS52YWwoJycpO1xuICAgICAgICAgICAgICAgICAgICAkZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkZmxhZztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdExvY2F0aW9uKCkge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGNvdW50cmllcykge1xuICAgICAgICAgICAgICAgIGlmIChjb3VudHJpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJG9wdGlvbiA9ICQoJzxvcHRpb24+PC9vcHRpb24+Jyk7XG4gICAgICAgICAgICAgICAgICAgICQoJG9wdGlvbikudmFsKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICQoJG9wdGlvbikuaHRtbChjb3VudHJpZXNba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNjb3VudHJ5JykuYXBwZW5kKCRvcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCgnI2NvdW50cnknKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0ZWQgPSB0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XTtcbiAgICAgICAgICAgICAgICB2YXIgJGNvdW50cnkgPSAkKCRzZWxlY3RlZCkuaHRtbCgpO1xuXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NvdW50cnknLCAkY291bnRyeSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgJHNlbGVjdGVkQ291bnRyeSA9ICQoJHNlbGVjdGVkKS52YWwoKTtcbiAgICAgICAgICAgICAgICB2YXIgJGl0ZW0gPSAkKCcjY2l0eScpO1xuXG4gICAgICAgICAgICAgICAgd2hpbGUgKCRpdGVtLmNoaWxkcmVuKCkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAkaXRlbS5jaGlsZHJlbigpLmxhc3QoKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2l0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaXRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNpdGllc1trZXldLmNvdW50cnkgPT0gJHNlbGVjdGVkQ291bnRyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkb3B0aW9uID0gJCgnPG9wdGlvbj48L29wdGlvbj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCRvcHRpb24pLnZhbChrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJG9wdGlvbikuaHRtbChjaXRpZXNba2V5XS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjY2l0eScpLmFwcGVuZCgkb3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKFwiI2NpdHlcIikuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHNlbGVjdGVkID0gdGhpcy5vcHRpb25zW3RoaXMuc2VsZWN0ZWRJbmRleF07XG4gICAgICAgICAgICAgICAgdmFyICRjaXR5ID0gJCgkc2VsZWN0ZWQpLmh0bWwoKTtcblxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjaXR5JywgJGNpdHkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2NhdGlvbkNoZWNrKCkge1xuICAgICAgICAgICAgJGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICgkKCcjY291bnRyeScpLnZhbCgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAkKCcjY291bnRyeScpLmNzcyh7J2JvcmRlcic6ICcxcHggc29saWQgI2ZmMDAwMCd9KTtcbiAgICAgICAgICAgICAgICAkKCcuYWxlcnQtY291bnRyeScpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcjY291bnRyeScpLmNzcyh7J2JvcmRlcic6ICcwJ30pO1xuICAgICAgICAgICAgICAgICQoJy5hbGVydC1jb3VudHJ5JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICRmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qcmV0dXJuICRmbGFnOyovXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzb2NpYWxJbnB1dCh0YXJnZXQpIHtcbiAgICAgICAgICAgICQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykuaGlkZSgpO1xuICAgICAgICAgICAgJCh0YXJnZXQpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGlkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpO1xuICAgICAgICAgICAgICAgICAgICAkaW5wdXQuYWRkQ2xhc3MoJGlkKTtcbiAgICAgICAgICAgICAgICAgICAgJCgkaW5wdXQpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzb2NpYWxJbnB1dENoZWNrKHRhcmdldCkge1xuICAgICAgICAgICAgJGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICgkKHRhcmdldCkuZmluZCgnaW5wdXQ6Y2hlY2tlZCcpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyICRhbGVydEVtcHR5ID0gJCgnPHNwYW4gY2xhc3M9XCJhbGVydFwiPtCf0L7QttCw0LvRg9C50YHRgtCwINCy0YvQsdC10YDQuNGC0LUg0YHQvtGGLtGB0LXRgtGMPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5maW5kKCdmb3JtJykuYXBwZW5kKCRhbGVydEVtcHR5KTtcbiAgICAgICAgICAgICAgICAkZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuZmluZCgnLmFsZXJ0JykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLmZpbmQoJ2lucHV0OmNoZWNrZWQnKS5wYXJlbnQoKS5maW5kKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGlucHV0VGV4dCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkaWQgPSAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkaW5wdXRUZXh0ID09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hbGVydC1zb2NpYWwnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHsnYm9yZGVyJzogJzFweCBzb2xpZCAjZmYwMDAwJ30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRhbGVydCA9ICQoJzxzcGFuIGNsYXNzPVwiYWxlcnQgYWxlcnQtc29jaWFsXCI+0J/QvtC70LUg0LTQvtC70LbQvdC+INCx0YvRgtGMINC30LDQv9C+0LvQvdC10L3Qvi48L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFwcGVuZCgkYWxlcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHsnYm9yZGVyJzogJzAnfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hbGVydC1zb2NpYWwnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCRpZCwgJGlucHV0VGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkZmxhZztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGltZ0Nob29zZSgpIHtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW1nQ2hlY2soKSB7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyICRjdXJyZW50ID0gJCgnLmN1cnJlbnQtc3RlcCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJGN1cnJlbnQpO1xuICAgICAgICAgICAgaWYgKCQoJGN1cnJlbnQpLmhhc0NsYXNzKCdmaXJzdCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZpcnN0Jyk7XG4gICAgICAgICAgICAgICAgJG5leHRCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJG5hbWUgPSAkKCcubmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBuYW1lQ2hlY2soJG5hbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkZW1haWwgPSAkKCcuZW1haWwnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgZW1haWxDaGVjaygkZW1haWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCduYW1lJywgJG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZW1haWwnLCAkZW1haWwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkKCRjdXJyZW50KS5oYXNDbGFzcygnc2Vjb25kJykpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2Vjb25kJyk7XG4gICAgICAgICAgICAgICAgc2VsZWN0TG9jYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICRuZXh0QnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25DaGVjaygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY291bnRyeScpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NpdHknKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQoJGN1cnJlbnQpLmhhc0NsYXNzKCd0aGlyZCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RocmVlJyk7XG4gICAgICAgICAgICAgICAgc29jaWFsSW5wdXQoJCgnLnRoaXJkJykpO1xuICAgICAgICAgICAgICAgICRuZXh0QnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc29jaWFsSW5wdXRDaGVjaygkKCcudGhpcmQnKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQoJGN1cnJlbnQpLmhhc0NsYXNzKCdmb3VydGgnKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmb3VyJyk7XG4gICAgICAgICAgICAgICAgaW1nQ2hvb3NlKCk7XG4gICAgICAgICAgICAgICAgJG5leHRCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpbWdDaGVjaygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgICAgICAkKCcuc3RlcCcpLmhpZGUoKS5yZW1vdmVDbGFzcygnY3VycmVudC1zdGVwJyk7XG4gICAgICAgICAgICAkKCcuZmlyc3QnKS5hZGRDbGFzcygnY3VycmVudC1zdGVwJykuc2hvdygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2hvd1Jlc3VsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgICAgIHJlc3VsdC5uYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ25hbWUnKTtcbiAgICAgICAgICAgIHJlc3VsdC5lbWFpbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpO1xuICAgICAgICAgICAgcmVzdWx0LmNvdW50cnkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY291bnRyeScpO1xuICAgICAgICAgICAgcmVzdWx0LmNpdHkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2l0eScpO1xuICAgICAgICAgICAgcmVzdWx0LnNvY2lhbCA9IFtdO1xuICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSAkKCcudGhpcmQnKS5maW5kKCdpbnB1dDpjaGVja2VkJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZWNrZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSAkKGNoZWNrZWRbaV0pLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnNvY2lhbFtpXSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgIH1cblxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
