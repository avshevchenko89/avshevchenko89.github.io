var countries={1:"Ukraine",2:"Germany",3:"France",4:"Spain",5:"Sweden",6:"USA",7:"Canada",8:"Moldova",9:"Belarus",10:"Poland"},cities={1:{country:1,name:"Ukraine"},2:{country:3,name:"Paris"},3:{country:4,name:"Madrid"},4:{country:6,name:"Houston"},5:{country:7,name:"Montreal"},6:{country:8,name:"Кишинев"},7:{country:9,name:"Minsk"},8:{country:10,name:"Warsaw"},100:{country:1,name:"Львов"},101:{country:1,name:"Николаев"},103:{country:1,name:"Переяслав-Хмельницкий"},104:{country:1,name:"Каменец-Подольский"},105:{country:1,name:"Donetsk"},106:{country:1,name:"Kharkov"},107:{country:1,name:"Луцк"},108:{country:1,name:"Poltava"},109:{country:1,name:"Черновцы"},299:{country:1,name:"Чернигов"},333:{country:1,name:"Чернигов"}};$(function(){function e(e){function t(e){return""==e?($(".name").css({border:"1px solid #ff0000"}),$(".alert-name").show(),!1):($(".name").css({border:"0"}),$(".alert-name").hide(),!0)}function s(e){var t=/^[a-z0-9_-]+@[a-z0-9-]+\.([a-z]{1,6}\.)?[a-z]{2,6}$/i;return""==e?($(".email").css({border:"1px solid #ff0000"}),$(".alert-email").show(),!1):($(".email").css({border:"0"}),$(".alert-email").hide(),0==e.search(t)?($(".alert-email-wr").hide(),!0):($(".email").css({border:"1px solid #ff0000"}),$(".alert-email-wr").show(),$($(".email")).val(""),!1))}function a(){$(".new").remove();for(var e in countries)if(countries.hasOwnProperty(e)){var t=$('<option class="new"></option>');$(t).val(e),$(t).html(countries[e]),$("#country").append(t)}$("#country").change(function(){var e=this.options[this.selectedIndex],t=$(e).html();localStorage.setItem("country",t);for(var s=$(e).val(),r=$("#city");r.children().length>1;)r.children().last().remove();for(var a in cities)if(cities.hasOwnProperty(a)&&cities[a].country==s){var n=$('<option class="new"></option>');$(n).val(a),$(n).html(cities[a].name),$("#city").append(n)}}),$("#city").change(function(){var e=this.options[this.selectedIndex],t=$(e).html();localStorage.setItem("city",t)})}function n(){return null==$("#country").val()?($("#country").css({border:"1px solid #ff0000"}),$(".alert-country").show(),!1):($("#country").css({border:"0"}),$(".alert-country").hide(),null==$("#city").val()&&localStorage.setItem("city","Город"),!0)}function c(){$(".third").find('input[type="text"]').hide(),$('input[type="checkbox"]').on("click",function(){if($(this).is(":checked")){var e=$(this).attr("id"),t=$(this).parent().find('input[type="text"]');t.addClass(e),$(t).show()}else $(this).parent().find('input[type="text"]').hide()})}function o(){var e=!1;return 0==$("input:checked").length?$(".input-alert").show():($(".alert").hide(),$("input:checked").parent().find('input[type="text"]').each(function(){var t=$(this).val(),s=$(this).parent().find('input[type="checkbox"]').attr("id");if(""==t){$(this).parent().find(".alert-social").remove(),$(this).css({border:"1px solid #ff0000"});var r=$('<span class="alert alert-social">Поле должно быть заполнено.</span>');$(this).parent().append(r)}else $(this).css({border:"0"}),$(this).parent().find(".alert-social").remove(),localStorage.setItem(s,t),e=!0})),e}function i(){$("img").css({border:0}),$("img").on("click",function(){$("img").css({border:0}),$(this).css({border:"3px solid #ff9800"}).addClass("chosen"),r=this})}function l(){if(0==$(".chosen").length)return!1;if($(r).hasClass("dog"))return $(".pic-alert").show(),$("img").removeClass("chosen").css({border:0}),!1;$(".pic-alert").hide();var e=$(r).attr("id");return localStorage.setItem("picId",e),!0}localStorage.clear(),$(".alert").hide(),this.firstCheck=function(){var e=$(".name").val(),r=$(".email").val();return t(e)&&s(r)?(localStorage.setItem("name",e),localStorage.setItem("email",r),!0):!1},this.second=function(){a()},this.secondCheck=function(){return!!n()},this.third=function(){c()},this.thirdCheck=function(){return!!o()},this.fourth=function(){i()},this.fourthCheck=function(){return!!l()},this.start=function(){var e=$(".current-step");$(e).hasClass("second")&&a(),$(e).hasClass("third")&&c($(".third")),$(e).hasClass("fourth")&&i()},this.showResult=function(){var e={};e.name=localStorage.getItem("name"),e.email=localStorage.getItem("email"),e.country=localStorage.getItem("country"),e.city=localStorage.getItem("city"),e.social=[],e.pic=localStorage.getItem("picId");for(var t=$(".third").find("input:checked"),s=0;s<t.length;s++){var r=$(t[s]).attr("id");e.social[s]=localStorage.getItem(r)}$(".wrapper").hide(),$(".results").css({display:"block"});var a=$('<div class="profile"></div>');$(".results").append(a);var n=$('<div class="profile-wrapper"></div>');a.append(n),n.append($("<h1>"+e.name+"</h1>")),n.append($('<p class="email">'+e.email+"</p>")),n.append($('<p class="location">'+e.city+", "+e.country+"</p>"));for(var s=0;s<e.social.length;s++)n.append($('<p class="social"><span class="social-name">'+$(t[s]).attr("id")+": </span>"+e.social[s]+"<p>"));a.append($('<img src="img/'+e.pic+'.jpg" class="pic">'));var c=$('<button class="reset">Пройти заново</button>');$(".results").append(c),c.one("click",function(){console.log("reset"),localStorage.clear(),a.remove(),c.remove(),$(".results").hide(),$(".wrapper").show(),$(".next").html("Следующий >").removeClass("finish"),$('input[type="text"]').val(""),$('input[type="email"]').val(""),$('input[type="checkbox"]').prop("checked",!1),$(".fourth").removeClass("current-step"),$(".first").addClass("current-step").show(),$(".page").removeClass("passed-page").removeClass("current-page"),$(".page:first-child").addClass("current-page")})}}var t=$(".prev"),s=$(".next");$(".first").addClass("current-step"),$(".page:first-child").addClass("current-page");var r,a=new e(".content");t.on("click",function(){$(".current-step").hasClass("first")||($(".current-step").hasClass("fourth")&&s.removeClass("finish").html("Следующий >"),$(".current-step").removeClass("current-step").prev().addClass("current-step"),$(".current-page").removeClass("current-page").prev().removeClass("passed-page").addClass("current-page"),a.start())}),s.on("click",function(e){e.preventDefault(),$(".current-step").hasClass("first")?a.firstCheck()&&($(".current-step").removeClass("current-step").next().addClass("current-step"),$(".current-page").removeClass("current-page").addClass("passed-page").next().addClass("current-page"),a.second()):$(".current-step").hasClass("second")?a.secondCheck()&&($(".current-step").removeClass("current-step").next().addClass("current-step"),$(".current-page").removeClass("current-page").addClass("passed-page").next().addClass("current-page"),a.third()):$(".current-step").hasClass("third")?a.thirdCheck()&&($(".current-step").removeClass("current-step").next().addClass("current-step"),$(".current-page").removeClass("current-page").addClass("passed-page").next().addClass("current-page"),s.html("Завершить").addClass("finish"),a.fourth()):$(".current-step").hasClass("fourth")&&a.fourthCheck()&&($("img").css({border:0}),a.showResult())}),$(".page").on("click",function(e){var t=e.target;switch($(t).html()){case"2":if(!$(t).prev().hasClass("passed-page"))return;$(".current-step").hasClass("fourth"),$(".next").removeClass("finish").html("Следующий >"),$(".current-step").removeClass("current-step"),$(".second").addClass("current-step"),$(".page").removeClass("current-page"),$(".page:not(:first-child)").removeClass("passed-page"),$(t).addClass("current-page"),a.start();break;case"3":if(!$(t).prev().hasClass("passed-page"))return;$(".current-step").hasClass("fourth")&&$(".next").removeClass("finish").html("Следующий >"),$(".current-step").removeClass("current-step"),$(".third").addClass("current-step"),$(".page").removeClass("current-page"),$(".page:nth-child(3) .page:nth-child(4)").removeClass("passed-page"),$(t).addClass("current-page"),a.start();break;case"4":if(!$(t).prev().hasClass("passed-page"))return;$(".current-step").removeClass("current-step"),$(".fourth").addClass("current-step"),$(".page").removeClass("current-page"),$(t).addClass("current-page");break;default:$(".current-step").hasClass("fourth")&&$(".next").removeClass("finish").html("Следующий >"),$(".current-step").removeClass("current-step"),$(".first").addClass("current-step"),$(".page").removeClass("passed-page").removeClass("current-page"),$(t).addClass("current-page")}})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJjb3VudHJpZXMiLCIxIiwiMiIsIjMiLCI0IiwiNSIsIjYiLCI3IiwiOCIsIjkiLCIxMCIsImNpdGllcyIsImNvdW50cnkiLCJuYW1lIiwiMTAwIiwiMTAxIiwiMTAzIiwiMTA0IiwiMTA1IiwiMTA2IiwiMTA3IiwiMTA4IiwiMTA5IiwiMjk5IiwiMzMzIiwiJCIsIkFua2V0YSIsImVsZW0iLCJuYW1lQ2hlY2siLCJjc3MiLCJib3JkZXIiLCJzaG93IiwiaGlkZSIsImVtYWlsQ2hlY2siLCJtYWlsIiwicGF0dGVybiIsInNlYXJjaCIsInZhbCIsInNlbGVjdExvY2F0aW9uIiwicmVtb3ZlIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCIkb3B0aW9uIiwiaHRtbCIsImFwcGVuZCIsImNoYW5nZSIsIiRzZWxlY3RlZCIsInRoaXMiLCJvcHRpb25zIiwic2VsZWN0ZWRJbmRleCIsIiRjb3VudHJ5IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIiRzZWxlY3RlZENvdW50cnkiLCIkaXRlbSIsImNoaWxkcmVuIiwibGVuZ3RoIiwibGFzdCIsIiRjaXR5IiwibG9jYXRpb25DaGVjayIsInNvY2lhbElucHV0IiwiZmluZCIsIm9uIiwiaXMiLCIkaWQiLCJhdHRyIiwiJGlucHV0IiwicGFyZW50IiwiYWRkQ2xhc3MiLCJzb2NpYWxJbnB1dENoZWNrIiwiJGZsYWciLCJlYWNoIiwiJGlucHV0VGV4dCIsIiRhbGVydCIsImltZ0Nob29zZSIsImltZyIsImltZ0NoZWNrIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInBpY0lkIiwiY2xlYXIiLCJmaXJzdENoZWNrIiwiJG5hbWUiLCIkZW1haWwiLCJzZWNvbmQiLCJzZWNvbmRDaGVjayIsInRoaXJkIiwidGhpcmRDaGVjayIsImZvdXJ0aCIsImZvdXJ0aENoZWNrIiwic3RhcnQiLCIkY3VycmVudCIsInNob3dSZXN1bHQiLCIkcmVzdWx0IiwiZ2V0SXRlbSIsImVtYWlsIiwiY2l0eSIsInNvY2lhbCIsInBpYyIsImNoZWNrZWQiLCJpIiwiaWQiLCJkaXNwbGF5IiwiJHByb2ZpbGUiLCIkcHJvZmlsZVdyYXBwZXIiLCIkcmVzZXQiLCJvbmUiLCJjb25zb2xlIiwibG9nIiwicHJvcCIsIiRwcmV2QnV0dG9uIiwiJG5leHRCdXR0b24iLCJhbmtldGEiLCJwcmV2IiwiZSIsInByZXZlbnREZWZhdWx0IiwibmV4dCIsIiR0YXJnZXQiLCJ0YXJnZXQiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLFlBQ0FDLEVBQUEsVUFDQUMsRUFBQSxVQUNBQyxFQUFBLFNBQ0FDLEVBQUEsUUFDQUMsRUFBQSxTQUNBQyxFQUFBLE1BQ0FDLEVBQUEsU0FDQUMsRUFBQSxVQUNBQyxFQUFBLFVBQ0FDLEdBQUEsVUFHQUMsUUFDQVYsR0FBQVcsUUFBQSxFQUFBQyxLQUFBLFdBQ0FYLEdBQUFVLFFBQUEsRUFBQUMsS0FBQSxTQUNBVixHQUFBUyxRQUFBLEVBQUFDLEtBQUEsVUFDQVQsR0FBQVEsUUFBQSxFQUFBQyxLQUFBLFdBQ0FSLEdBQUFPLFFBQUEsRUFBQUMsS0FBQSxZQUNBUCxHQUFBTSxRQUFBLEVBQUFDLEtBQUEsV0FDQU4sR0FBQUssUUFBQSxFQUFBQyxLQUFBLFNBQ0FMLEdBQUFJLFFBQUEsR0FBQUMsS0FBQSxVQUNBQyxLQUFBRixRQUFBLEVBQUFDLEtBQUEsU0FDQUUsS0FBQUgsUUFBQSxFQUFBQyxLQUFBLFlBQ0FHLEtBQUFKLFFBQUEsRUFBQUMsS0FBQSx5QkFDQUksS0FBQUwsUUFBQSxFQUFBQyxLQUFBLHNCQUNBSyxLQUFBTixRQUFBLEVBQUFDLEtBQUEsV0FDQU0sS0FBQVAsUUFBQSxFQUFBQyxLQUFBLFdBQ0FPLEtBQUFSLFFBQUEsRUFBQUMsS0FBQSxRQUNBUSxLQUFBVCxRQUFBLEVBQUFDLEtBQUEsV0FDQVMsS0FBQVYsUUFBQSxFQUFBQyxLQUFBLFlBQ0FVLEtBQUFYLFFBQUEsRUFBQUMsS0FBQSxZQUNBVyxLQUFBWixRQUFBLEVBQUFDLEtBQUEsWUFHQVksR0FBQSxXQXlHQSxRQUFBQyxHQUFBQyxHQUtBLFFBQUFDLEdBQUFmLEdBQ0EsTUFBQSxJQUFBQSxHQUNBWSxFQUFBLFNBQUFJLEtBQUFDLE9BQUEsc0JBQ0FMLEVBQUEsZUFBQU0sUUFDQSxJQUVBTixFQUFBLFNBQUFJLEtBQUFDLE9BQUEsTUFDQUwsRUFBQSxlQUFBTyxRQUNBLEdBSUEsUUFBQUMsR0FBQUMsR0FDQSxHQUFBQyxHQUFBLHNEQUVBLE9BQUEsSUFBQUQsR0FDQVQsRUFBQSxVQUFBSSxLQUFBQyxPQUFBLHNCQUNBTCxFQUFBLGdCQUFBTSxRQUNBLElBRUFOLEVBQUEsVUFBQUksS0FBQUMsT0FBQSxNQUNBTCxFQUFBLGdCQUFBTyxPQUVBLEdBQUFFLEVBQUFFLE9BQUFELElBQ0FWLEVBQUEsbUJBQUFPLFFBQ0EsSUFHQVAsRUFBQSxVQUFBSSxLQUFBQyxPQUFBLHNCQUNBTCxFQUFBLG1CQUFBTSxPQUNBTixFQUFBQSxFQUFBLFdBQUFZLElBQUEsS0FDQSxJQUtBLFFBQUFDLEtBQ0FiLEVBQUEsUUFBQWMsUUFDQSxLQUFBLEdBQUFDLEtBQUF4QyxXQUNBLEdBQUFBLFVBQUF5QyxlQUFBRCxHQUFBLENBQ0EsR0FBQUUsR0FBQWpCLEVBQUEsZ0NBQ0FBLEdBQUFpQixHQUFBTCxJQUFBRyxHQUNBZixFQUFBaUIsR0FBQUMsS0FBQTNDLFVBQUF3QyxJQUNBZixFQUFBLFlBQUFtQixPQUFBRixHQUlBakIsRUFBQSxZQUFBb0IsT0FBQSxXQUNBLEdBQUFDLEdBQUFDLEtBQUFDLFFBQUFELEtBQUFFLGVBQ0FDLEVBQUF6QixFQUFBcUIsR0FBQUgsTUFFQVEsY0FBQUMsUUFBQSxVQUFBRixFQUtBLEtBSEEsR0FBQUcsR0FBQTVCLEVBQUFxQixHQUFBVCxNQUNBaUIsRUFBQTdCLEVBQUEsU0FFQTZCLEVBQUFDLFdBQUFDLE9BQUEsR0FDQUYsRUFBQUMsV0FBQUUsT0FBQWxCLFFBR0EsS0FBQSxHQUFBQyxLQUFBN0IsUUFDQSxHQUFBQSxPQUFBOEIsZUFBQUQsSUFDQTdCLE9BQUE2QixHQUFBNUIsU0FBQXlDLEVBQUEsQ0FDQSxHQUFBWCxHQUFBakIsRUFBQSxnQ0FDQUEsR0FBQWlCLEdBQUFMLElBQUFHLEdBQ0FmLEVBQUFpQixHQUFBQyxLQUFBaEMsT0FBQTZCLEdBQUEzQixNQUNBWSxFQUFBLFNBQUFtQixPQUFBRixNQU1BakIsRUFBQSxTQUFBb0IsT0FBQSxXQUNBLEdBQUFDLEdBQUFDLEtBQUFDLFFBQUFELEtBQUFFLGVBQ0FTLEVBQUFqQyxFQUFBcUIsR0FBQUgsTUFFQVEsY0FBQUMsUUFBQSxPQUFBTSxLQUlBLFFBQUFDLEtBQ0EsTUFBQSxPQUFBbEMsRUFBQSxZQUFBWSxPQUNBWixFQUFBLFlBQUFJLEtBQUFDLE9BQUEsc0JBQ0FMLEVBQUEsa0JBQUFNLFFBQ0EsSUFFQU4sRUFBQSxZQUFBSSxLQUFBQyxPQUFBLE1BQ0FMLEVBQUEsa0JBQUFPLE9BQ0EsTUFBQVAsRUFBQSxTQUFBWSxPQUNBYyxhQUFBQyxRQUFBLE9BQUEsVUFFQSxHQUlBLFFBQUFRLEtBQ0FuQyxFQUFBLFVBQUFvQyxLQUFBLHNCQUFBN0IsT0FDQVAsRUFBQSwwQkFBQXFDLEdBQUEsUUFBQSxXQUNBLEdBQUFyQyxFQUFBc0IsTUFBQWdCLEdBQUEsWUFBQSxDQUNBLEdBQUFDLEdBQUF2QyxFQUFBc0IsTUFBQWtCLEtBQUEsTUFDQUMsRUFBQXpDLEVBQUFzQixNQUFBb0IsU0FBQU4sS0FBQSxxQkFDQUssR0FBQUUsU0FBQUosR0FDQXZDLEVBQUF5QyxHQUFBbkMsV0FFQU4sR0FBQXNCLE1BQUFvQixTQUFBTixLQUFBLHNCQUFBN0IsU0FLQSxRQUFBcUMsS0FDQSxHQUFBQyxJQUFBLENBcUJBLE9BcEJBLElBQUE3QyxFQUFBLGlCQUFBK0IsT0FDQS9CLEVBQUEsZ0JBQUFNLFFBRUFOLEVBQUEsVUFBQU8sT0FDQVAsRUFBQSxpQkFBQTBDLFNBQUFOLEtBQUEsc0JBQUFVLEtBQUEsV0FDQSxHQUFBQyxHQUFBL0MsRUFBQXNCLE1BQUFWLE1BQ0EyQixFQUFBdkMsRUFBQXNCLE1BQUFvQixTQUFBTixLQUFBLDBCQUFBSSxLQUFBLEtBQ0EsSUFBQSxJQUFBTyxFQUFBLENBQ0EvQyxFQUFBc0IsTUFBQW9CLFNBQUFOLEtBQUEsaUJBQUF0QixTQUNBZCxFQUFBc0IsTUFBQWxCLEtBQUFDLE9BQUEscUJBQ0EsSUFBQTJDLEdBQUFoRCxFQUFBLHNFQUNBQSxHQUFBc0IsTUFBQW9CLFNBQUF2QixPQUFBNkIsT0FFQWhELEdBQUFzQixNQUFBbEIsS0FBQUMsT0FBQSxNQUNBTCxFQUFBc0IsTUFBQW9CLFNBQUFOLEtBQUEsaUJBQUF0QixTQUNBWSxhQUFBQyxRQUFBWSxFQUFBUSxHQUNBRixHQUFBLEtBSUFBLEVBR0EsUUFBQUksS0FDQWpELEVBQUEsT0FBQUksS0FBQUMsT0FBQSxJQUNBTCxFQUFBLE9BQUFxQyxHQUFBLFFBQUEsV0FDQXJDLEVBQUEsT0FBQUksS0FBQUMsT0FBQSxJQUNBTCxFQUFBc0IsTUFBQWxCLEtBQUFDLE9BQUEsc0JBQUFzQyxTQUFBLFVBQ0FPLEVBQUE1QixPQUlBLFFBQUE2QixLQUVBLEdBQUEsR0FBQW5ELEVBQUEsV0FBQStCLE9BQUEsT0FBQSxDQUNBLElBQUEvQixFQUFBa0QsR0FBQUUsU0FBQSxPQUdBLE1BRkFwRCxHQUFBLGNBQUFNLE9BQ0FOLEVBQUEsT0FBQXFELFlBQUEsVUFBQWpELEtBQUFDLE9BQUEsS0FDQSxDQUVBTCxHQUFBLGNBQUFPLE1BQ0EsSUFBQStDLEdBQUF0RCxFQUFBa0QsR0FBQVYsS0FBQSxLQUVBLE9BREFkLGNBQUFDLFFBQUEsUUFBQTJCLElBQ0EsRUE3SkE1QixhQUFBNkIsUUFDQXZELEVBQUEsVUFBQU8sT0FnS0FlLEtBQUFrQyxXQUFBLFdBQ0EsR0FBQUMsR0FBQXpELEVBQUEsU0FBQVksTUFDQThDLEVBQUExRCxFQUFBLFVBQUFZLEtBQ0EsT0FBQVQsR0FBQXNELElBQUFqRCxFQUFBa0QsSUFDQWhDLGFBQUFDLFFBQUEsT0FBQThCLEdBQ0EvQixhQUFBQyxRQUFBLFFBQUErQixJQUNBLElBRUEsR0FJQXBDLEtBQUFxQyxPQUFBLFdBQ0E5QyxLQUdBUyxLQUFBc0MsWUFBQSxXQUNBLFFBQUExQixLQU9BWixLQUFBdUMsTUFBQSxXQUNBMUIsS0FHQWIsS0FBQXdDLFdBQUEsV0FDQSxRQUFBbEIsS0FPQXRCLEtBQUF5QyxPQUFBLFdBQ0FkLEtBR0EzQixLQUFBMEMsWUFBQSxXQUNBLFFBQUFiLEtBT0E3QixLQUFBMkMsTUFBQSxXQUVBLEdBQUFDLEdBQUFsRSxFQUFBLGdCQUVBQSxHQUFBa0UsR0FBQWQsU0FBQSxXQUNBdkMsSUFHQWIsRUFBQWtFLEdBQUFkLFNBQUEsVUFDQWpCLEVBQUFuQyxFQUFBLFdBR0FBLEVBQUFrRSxHQUFBZCxTQUFBLFdBQ0FILEtBSUEzQixLQUFBNkMsV0FBQSxXQUNBLEdBQUFDLEtBQ0FBLEdBQUFoRixLQUFBc0MsYUFBQTJDLFFBQUEsUUFDQUQsRUFBQUUsTUFBQTVDLGFBQUEyQyxRQUFBLFNBQ0FELEVBQUFqRixRQUFBdUMsYUFBQTJDLFFBQUEsV0FDQUQsRUFBQUcsS0FBQTdDLGFBQUEyQyxRQUFBLFFBQ0FELEVBQUFJLFVBQ0FKLEVBQUFLLElBQUEvQyxhQUFBMkMsUUFBQSxRQUdBLEtBQUEsR0FGQUssR0FBQTFFLEVBQUEsVUFBQW9DLEtBQUEsaUJBRUF1QyxFQUFBLEVBQUFBLEVBQUFELEVBQUEzQyxPQUFBNEMsSUFBQSxDQUNBLEdBQUFDLEdBQUE1RSxFQUFBMEUsRUFBQUMsSUFBQW5DLEtBQUEsS0FDQTRCLEdBQUFJLE9BQUFHLEdBQUFqRCxhQUFBMkMsUUFBQU8sR0FFQTVFLEVBQUEsWUFBQU8sT0FDQVAsRUFBQSxZQUFBSSxLQUFBeUUsUUFBQSxTQUNBLElBQUFDLEdBQUE5RSxFQUFBLDhCQUNBQSxHQUFBLFlBQUFtQixPQUFBMkQsRUFDQSxJQUFBQyxHQUFBL0UsRUFBQSxzQ0FFQThFLEdBQUEzRCxPQUFBNEQsR0FDQUEsRUFBQTVELE9BQUFuQixFQUFBLE9BQUFvRSxFQUFBaEYsS0FBQSxVQUNBMkYsRUFBQTVELE9BQUFuQixFQUFBLG9CQUFBb0UsRUFBQUUsTUFBQSxTQUNBUyxFQUFBNUQsT0FBQW5CLEVBQUEsdUJBQUFvRSxFQUFBRyxLQUFBLEtBQUFILEVBQUFqRixRQUFBLFFBRUEsS0FBQSxHQUFBd0YsR0FBQSxFQUFBQSxFQUFBUCxFQUFBSSxPQUFBekMsT0FBQTRDLElBQ0FJLEVBQUE1RCxPQUFBbkIsRUFBQSwrQ0FBQUEsRUFBQTBFLEVBQUFDLElBQUFuQyxLQUFBLE1BQUEsWUFBQTRCLEVBQUFJLE9BQUFHLEdBQUEsT0FHQUcsR0FBQTNELE9BQUFuQixFQUFBLGlCQUFBb0UsRUFBQUssSUFBQSxzQkFDQSxJQUFBTyxHQUFBaEYsRUFBQSwrQ0FDQUEsR0FBQSxZQUFBbUIsT0FBQTZELEdBQ0FBLEVBQUFDLElBQUEsUUFBQSxXQUNBQyxRQUFBQyxJQUFBLFNBQ0F6RCxhQUFBNkIsUUFDQXVCLEVBQUFoRSxTQUNBa0UsRUFBQWxFLFNBQ0FkLEVBQUEsWUFBQU8sT0FDQVAsRUFBQSxZQUFBTSxPQUNBTixFQUFBLFNBQUFrQixLQUFBLGVBQUFtQyxZQUFBLFVBQ0FyRCxFQUFBLHNCQUFBWSxJQUFBLElBQ0FaLEVBQUEsdUJBQUFZLElBQUEsSUFDQVosRUFBQSwwQkFBQW9GLEtBQUEsV0FBQSxHQUNBcEYsRUFBQSxXQUFBcUQsWUFBQSxnQkFDQXJELEVBQUEsVUFBQTJDLFNBQUEsZ0JBQUFyQyxPQUNBTixFQUFBLFNBQUFxRCxZQUFBLGVBQUFBLFlBQUEsZ0JBQ0FyRCxFQUFBLHFCQUFBMkMsU0FBQSxtQkF6WEEsR0FBQTBDLEdBQUFyRixFQUFBLFNBQ0FzRixFQUFBdEYsRUFBQSxRQUNBQSxHQUFBLFVBQUEyQyxTQUFBLGdCQUVBM0MsRUFBQSxxQkFBQTJDLFNBQUEsZUFDQSxJQUNBTyxHQURBcUMsRUFBQSxHQUFBdEYsR0FBQSxXQUlBb0YsR0FBQWhELEdBQUEsUUFBQSxXQUNBckMsRUFBQSxpQkFBQW9ELFNBQUEsV0FJQXBELEVBQUEsaUJBQUFvRCxTQUFBLFdBQ0FrQyxFQUFBakMsWUFBQSxVQUFBbkMsS0FBQSxlQUVBbEIsRUFBQSxpQkFBQXFELFlBQUEsZ0JBQUFtQyxPQUFBN0MsU0FBQSxnQkFDQTNDLEVBQUEsaUJBQUFxRCxZQUFBLGdCQUFBbUMsT0FBQW5DLFlBQUEsZUFBQVYsU0FBQSxnQkFDQTRDLEVBQUF0QixXQUlBcUIsRUFBQWpELEdBQUEsUUFBQSxTQUFBb0QsR0FDQUEsRUFBQUMsaUJBQ0ExRixFQUFBLGlCQUFBb0QsU0FBQSxTQUNBbUMsRUFBQS9CLGVBQ0F4RCxFQUFBLGlCQUFBcUQsWUFBQSxnQkFBQXNDLE9BQUFoRCxTQUFBLGdCQUNBM0MsRUFBQSxpQkFBQXFELFlBQUEsZ0JBQUFWLFNBQUEsZUFBQWdELE9BQUFoRCxTQUFBLGdCQUNBNEMsRUFBQTVCLFVBRUEzRCxFQUFBLGlCQUFBb0QsU0FBQSxVQUNBbUMsRUFBQTNCLGdCQUNBNUQsRUFBQSxpQkFBQXFELFlBQUEsZ0JBQUFzQyxPQUFBaEQsU0FBQSxnQkFDQTNDLEVBQUEsaUJBQUFxRCxZQUFBLGdCQUFBVixTQUFBLGVBQUFnRCxPQUFBaEQsU0FBQSxnQkFDQTRDLEVBQUExQixTQUVBN0QsRUFBQSxpQkFBQW9ELFNBQUEsU0FDQW1DLEVBQUF6QixlQUNBOUQsRUFBQSxpQkFBQXFELFlBQUEsZ0JBQUFzQyxPQUFBaEQsU0FBQSxnQkFDQTNDLEVBQUEsaUJBQUFxRCxZQUFBLGdCQUFBVixTQUFBLGVBQUFnRCxPQUFBaEQsU0FBQSxnQkFDQTJDLEVBQUFwRSxLQUFBLGFBQUF5QixTQUFBLFVBQ0E0QyxFQUFBeEIsVUFFQS9ELEVBQUEsaUJBQUFvRCxTQUFBLFdBQ0FtQyxFQUFBdkIsZ0JBQ0FoRSxFQUFBLE9BQUFJLEtBQUFDLE9BQUEsSUFDQWtGLEVBQUFwQixnQkFNQW5FLEVBQUEsU0FBQXFDLEdBQUEsUUFBQSxTQUFBb0QsR0FDQSxHQUFBRyxHQUFBSCxFQUFBSSxNQUVBLFFBQUE3RixFQUFBNEYsR0FBQTFFLFFBQ0EsSUFBQSxJQUNBLElBQUFsQixFQUFBNEYsR0FBQUosT0FBQXBDLFNBQUEsZUFVQSxNQVRBcEQsR0FBQSxpQkFBQW9ELFNBQUEsVUFFQXBELEVBQUEsU0FBQXFELFlBQUEsVUFBQW5DLEtBQUEsZUFDQWxCLEVBQUEsaUJBQUFxRCxZQUFBLGdCQUNBckQsRUFBQSxXQUFBMkMsU0FBQSxnQkFDQTNDLEVBQUEsU0FBQXFELFlBQUEsZ0JBQ0FyRCxFQUFBLDJCQUFBcUQsWUFBQSxlQUNBckQsRUFBQTRGLEdBQUFqRCxTQUFBLGdCQUNBNEMsRUFBQXRCLE9BRUEsTUFDQSxLQUFBLElBQ0EsSUFBQWpFLEVBQUE0RixHQUFBSixPQUFBcEMsU0FBQSxlQVVBLE1BVEFwRCxHQUFBLGlCQUFBb0QsU0FBQSxXQUNBcEQsRUFBQSxTQUFBcUQsWUFBQSxVQUFBbkMsS0FBQSxlQUVBbEIsRUFBQSxpQkFBQXFELFlBQUEsZ0JBQ0FyRCxFQUFBLFVBQUEyQyxTQUFBLGdCQUNBM0MsRUFBQSxTQUFBcUQsWUFBQSxnQkFDQXJELEVBQUEseUNBQUFxRCxZQUFBLGVBQ0FyRCxFQUFBNEYsR0FBQWpELFNBQUEsZ0JBQ0E0QyxFQUFBdEIsT0FFQSxNQUNBLEtBQUEsSUFDQSxJQUFBakUsRUFBQTRGLEdBQUFKLE9BQUFwQyxTQUFBLGVBS0EsTUFKQXBELEdBQUEsaUJBQUFxRCxZQUFBLGdCQUNBckQsRUFBQSxXQUFBMkMsU0FBQSxnQkFDQTNDLEVBQUEsU0FBQXFELFlBQUEsZ0JBQ0FyRCxFQUFBNEYsR0FBQWpELFNBQUEsZUFFQSxNQUNBLFNBQ0EzQyxFQUFBLGlCQUFBb0QsU0FBQSxXQUNBcEQsRUFBQSxTQUFBcUQsWUFBQSxVQUFBbkMsS0FBQSxlQUVBbEIsRUFBQSxpQkFBQXFELFlBQUEsZ0JBQ0FyRCxFQUFBLFVBQUEyQyxTQUFBLGdCQUNBM0MsRUFBQSxTQUFBcUQsWUFBQSxlQUFBQSxZQUFBLGdCQUNBckQsRUFBQTRGLEdBQUFqRCxTQUFBIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY291bnRyaWVzID0ge1xuICAgIFwiMVwiOiBcIlVrcmFpbmVcIixcbiAgICBcIjJcIjogXCJHZXJtYW55XCIsXG4gICAgXCIzXCI6IFwiRnJhbmNlXCIsXG4gICAgXCI0XCI6IFwiU3BhaW5cIixcbiAgICBcIjVcIjogXCJTd2VkZW5cIixcbiAgICBcIjZcIjogXCJVU0FcIixcbiAgICBcIjdcIjogXCJDYW5hZGFcIixcbiAgICBcIjhcIjogXCJNb2xkb3ZhXCIsXG4gICAgXCI5XCI6IFwiQmVsYXJ1c1wiLFxuICAgIFwiMTBcIjogXCJQb2xhbmRcIlxufTtcblxudmFyIGNpdGllcyA9IHtcbiAgICBcIjFcIjoge1wiY291bnRyeVwiOiAxLCBcIm5hbWVcIjogXCJVa3JhaW5lXCJ9LFxuICAgIFwiMlwiOiB7XCJjb3VudHJ5XCI6IDMsIFwibmFtZVwiOiBcIlBhcmlzXCJ9LFxuICAgIFwiM1wiOiB7XCJjb3VudHJ5XCI6IDQsIFwibmFtZVwiOiBcIk1hZHJpZFwifSxcbiAgICBcIjRcIjoge1wiY291bnRyeVwiOiA2LCBcIm5hbWVcIjogXCJIb3VzdG9uXCJ9LFxuICAgIFwiNVwiOiB7XCJjb3VudHJ5XCI6IDcsIFwibmFtZVwiOiBcIk1vbnRyZWFsXCJ9LFxuICAgIFwiNlwiOiB7XCJjb3VudHJ5XCI6IDgsIFwibmFtZVwiOiBcItCa0LjRiNC40L3QtdCyXCJ9LFxuICAgIFwiN1wiOiB7XCJjb3VudHJ5XCI6IDksIFwibmFtZVwiOiBcIk1pbnNrXCJ9LFxuICAgIFwiOFwiOiB7XCJjb3VudHJ5XCI6IDEwLCBcIm5hbWVcIjogXCJXYXJzYXdcIn0sXG4gICAgXCIxMDBcIjoge1wiY291bnRyeVwiOiAxLCBcIm5hbWVcIjogXCLQm9GM0LLQvtCyXCJ9LFxuICAgIFwiMTAxXCI6IHtcImNvdW50cnlcIjogMSwgXCJuYW1lXCI6IFwi0J3QuNC60L7Qu9Cw0LXQslwifSxcbiAgICBcIjEwM1wiOiB7XCJjb3VudHJ5XCI6IDEsIFwibmFtZVwiOiBcItCf0LXRgNC10Y/RgdC70LDQsi3QpdC80LXQu9GM0L3QuNGG0LrQuNC5XCJ9LFxuICAgIFwiMTA0XCI6IHtcImNvdW50cnlcIjogMSwgXCJuYW1lXCI6IFwi0JrQsNC80LXQvdC10YYt0J/QvtC00L7Qu9GM0YHQutC40LlcIn0sXG4gICAgXCIxMDVcIjoge1wiY291bnRyeVwiOiAxLCBcIm5hbWVcIjogXCJEb25ldHNrXCJ9LFxuICAgIFwiMTA2XCI6IHtcImNvdW50cnlcIjogMSwgXCJuYW1lXCI6IFwiS2hhcmtvdlwifSxcbiAgICBcIjEwN1wiOiB7XCJjb3VudHJ5XCI6IDEsIFwibmFtZVwiOiBcItCb0YPRhtC6XCJ9LFxuICAgIFwiMTA4XCI6IHtcImNvdW50cnlcIjogMSwgXCJuYW1lXCI6IFwiUG9sdGF2YVwifSxcbiAgICBcIjEwOVwiOiB7XCJjb3VudHJ5XCI6IDEsIFwibmFtZVwiOiBcItCn0LXRgNC90L7QstGG0YtcIn0sXG4gICAgXCIyOTlcIjoge1wiY291bnRyeVwiOiAxLCBcIm5hbWVcIjogXCLQp9C10YDQvdC40LPQvtCyXCJ9LFxuICAgIFwiMzMzXCI6IHtcImNvdW50cnlcIjogMSwgXCJuYW1lXCI6IFwi0KfQtdGA0L3QuNCz0L7QslwifVxufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICAgLy92YXJpYWJsZXNcbiAgICB2YXIgJHByZXZCdXR0b24gPSAkKCcucHJldicpO1xuICAgIHZhciAkbmV4dEJ1dHRvbiA9ICQoJy5uZXh0Jyk7XG4gICAgJCgnLmZpcnN0JykuYWRkQ2xhc3MoJ2N1cnJlbnQtc3RlcCcpO1xuXG4gICAgJCgnLnBhZ2U6Zmlyc3QtY2hpbGQnKS5hZGRDbGFzcygnY3VycmVudC1wYWdlJyk7XG4gICAgdmFyIGFua2V0YSA9IG5ldyBBbmtldGEoJy5jb250ZW50Jyk7XG4gICAgdmFyIGltZztcblxuICAgIC8vY29udHJvbEJ1dHRvbnNcbiAgICAkcHJldkJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKCcuY3VycmVudC1zdGVwJykuaGFzQ2xhc3MoJ2ZpcnN0JykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgaWYgKCQoJy5jdXJyZW50LXN0ZXAnKS5oYXNDbGFzcygnZm91cnRoJykpIHtcbiAgICAgICAgICAgICAgICAkbmV4dEJ1dHRvbi5yZW1vdmVDbGFzcygnZmluaXNoJykuaHRtbCgn0KHQu9C10LTRg9GO0YnQuNC5ID4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQoJy5jdXJyZW50LXN0ZXAnKS5yZW1vdmVDbGFzcygnY3VycmVudC1zdGVwJykucHJldigpLmFkZENsYXNzKCdjdXJyZW50LXN0ZXAnKTtcbiAgICAgICAgICAgICQoJy5jdXJyZW50LXBhZ2UnKS5yZW1vdmVDbGFzcygnY3VycmVudC1wYWdlJykucHJldigpLnJlbW92ZUNsYXNzKCdwYXNzZWQtcGFnZScpLmFkZENsYXNzKCdjdXJyZW50LXBhZ2UnKTtcbiAgICAgICAgICAgIGFua2V0YS5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkbmV4dEJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICgkKCcuY3VycmVudC1zdGVwJykuaGFzQ2xhc3MoJ2ZpcnN0JykpIHtcbiAgICAgICAgICAgIGlmIChhbmtldGEuZmlyc3RDaGVjaygpKSB7XG4gICAgICAgICAgICAgICAgJCgnLmN1cnJlbnQtc3RlcCcpLnJlbW92ZUNsYXNzKCdjdXJyZW50LXN0ZXAnKS5uZXh0KCkuYWRkQ2xhc3MoJ2N1cnJlbnQtc3RlcCcpO1xuICAgICAgICAgICAgICAgICQoJy5jdXJyZW50LXBhZ2UnKS5yZW1vdmVDbGFzcygnY3VycmVudC1wYWdlJykuYWRkQ2xhc3MoJ3Bhc3NlZC1wYWdlJykubmV4dCgpLmFkZENsYXNzKCdjdXJyZW50LXBhZ2UnKTtcbiAgICAgICAgICAgICAgICBhbmtldGEuc2Vjb25kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoJCgnLmN1cnJlbnQtc3RlcCcpLmhhc0NsYXNzKCdzZWNvbmQnKSkge1xuICAgICAgICAgICAgaWYgKGFua2V0YS5zZWNvbmRDaGVjaygpKSB7XG4gICAgICAgICAgICAgICAgJCgnLmN1cnJlbnQtc3RlcCcpLnJlbW92ZUNsYXNzKCdjdXJyZW50LXN0ZXAnKS5uZXh0KCkuYWRkQ2xhc3MoJ2N1cnJlbnQtc3RlcCcpO1xuICAgICAgICAgICAgICAgICQoJy5jdXJyZW50LXBhZ2UnKS5yZW1vdmVDbGFzcygnY3VycmVudC1wYWdlJykuYWRkQ2xhc3MoJ3Bhc3NlZC1wYWdlJykubmV4dCgpLmFkZENsYXNzKCdjdXJyZW50LXBhZ2UnKTtcbiAgICAgICAgICAgICAgICBhbmtldGEudGhpcmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICgkKCcuY3VycmVudC1zdGVwJykuaGFzQ2xhc3MoJ3RoaXJkJykpIHtcbiAgICAgICAgICAgIGlmIChhbmtldGEudGhpcmRDaGVjaygpKSB7XG4gICAgICAgICAgICAgICAgJCgnLmN1cnJlbnQtc3RlcCcpLnJlbW92ZUNsYXNzKCdjdXJyZW50LXN0ZXAnKS5uZXh0KCkuYWRkQ2xhc3MoJ2N1cnJlbnQtc3RlcCcpO1xuICAgICAgICAgICAgICAgICQoJy5jdXJyZW50LXBhZ2UnKS5yZW1vdmVDbGFzcygnY3VycmVudC1wYWdlJykuYWRkQ2xhc3MoJ3Bhc3NlZC1wYWdlJykubmV4dCgpLmFkZENsYXNzKCdjdXJyZW50LXBhZ2UnKTtcbiAgICAgICAgICAgICAgICAkbmV4dEJ1dHRvbi5odG1sKCfQl9Cw0LLQtdGA0YjQuNGC0YwnKS5hZGRDbGFzcygnZmluaXNoJyk7XG4gICAgICAgICAgICAgICAgYW5rZXRhLmZvdXJ0aCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCQoJy5jdXJyZW50LXN0ZXAnKS5oYXNDbGFzcygnZm91cnRoJykpIHtcbiAgICAgICAgICAgIGlmIChhbmtldGEuZm91cnRoQ2hlY2soKSkge1xuICAgICAgICAgICAgICAgICQoJ2ltZycpLmNzcyh7J2JvcmRlcic6IDB9KTtcbiAgICAgICAgICAgICAgICBhbmtldGEuc2hvd1Jlc3VsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvL3BhZ2luYXRvclxuICAgICQoJy5wYWdlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyICR0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIHN3aXRjaCAoJCgkdGFyZ2V0KS5odG1sKCkpIHtcbiAgICAgICAgICAgIGNhc2UgJzInOlxuICAgICAgICAgICAgICAgIGlmICgkKCR0YXJnZXQpLnByZXYoKS5oYXNDbGFzcygncGFzc2VkLXBhZ2UnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLmN1cnJlbnQtc3RlcCcpLmhhc0NsYXNzKCdmb3VydGgnKSkge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoJy5uZXh0JykucmVtb3ZlQ2xhc3MoJ2ZpbmlzaCcpLmh0bWwoJ9Ch0LvQtdC00YPRjtGJ0LjQuSA+Jyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5jdXJyZW50LXN0ZXAnKS5yZW1vdmVDbGFzcygnY3VycmVudC1zdGVwJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5zZWNvbmQnKS5hZGRDbGFzcygnY3VycmVudC1zdGVwJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5wYWdlJykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQtcGFnZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCcucGFnZTpub3QoOmZpcnN0LWNoaWxkKScpLnJlbW92ZUNsYXNzKCdwYXNzZWQtcGFnZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCR0YXJnZXQpLmFkZENsYXNzKCdjdXJyZW50LXBhZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgYW5rZXRhLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHJldHVybjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJzMnOlxuICAgICAgICAgICAgICAgIGlmICgkKCR0YXJnZXQpLnByZXYoKS5oYXNDbGFzcygncGFzc2VkLXBhZ2UnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLmN1cnJlbnQtc3RlcCcpLmhhc0NsYXNzKCdmb3VydGgnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm5leHQnKS5yZW1vdmVDbGFzcygnZmluaXNoJykuaHRtbCgn0KHQu9C10LTRg9GO0YnQuNC5ID4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkKCcuY3VycmVudC1zdGVwJykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQtc3RlcCcpO1xuICAgICAgICAgICAgICAgICAgICAkKCcudGhpcmQnKS5hZGRDbGFzcygnY3VycmVudC1zdGVwJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5wYWdlJykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQtcGFnZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCcucGFnZTpudGgtY2hpbGQoMykgLnBhZ2U6bnRoLWNoaWxkKDQpJykucmVtb3ZlQ2xhc3MoJ3Bhc3NlZC1wYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJHRhcmdldCkuYWRkQ2xhc3MoJ2N1cnJlbnQtcGFnZScpO1xuICAgICAgICAgICAgICAgICAgICBhbmtldGEuc3RhcnQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnNCc6XG4gICAgICAgICAgICAgICAgaWYgKCQoJHRhcmdldCkucHJldigpLmhhc0NsYXNzKCdwYXNzZWQtcGFnZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5jdXJyZW50LXN0ZXAnKS5yZW1vdmVDbGFzcygnY3VycmVudC1zdGVwJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5mb3VydGgnKS5hZGRDbGFzcygnY3VycmVudC1zdGVwJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5wYWdlJykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQtcGFnZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCR0YXJnZXQpLmFkZENsYXNzKCdjdXJyZW50LXBhZ2UnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpZiAoJCgnLmN1cnJlbnQtc3RlcCcpLmhhc0NsYXNzKCdmb3VydGgnKSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcubmV4dCcpLnJlbW92ZUNsYXNzKCdmaW5pc2gnKS5odG1sKCfQodC70LXQtNGD0Y7RidC40LkgPicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKCcuY3VycmVudC1zdGVwJykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQtc3RlcCcpO1xuICAgICAgICAgICAgICAgICQoJy5maXJzdCcpLmFkZENsYXNzKCdjdXJyZW50LXN0ZXAnKTtcbiAgICAgICAgICAgICAgICAkKCcucGFnZScpLnJlbW92ZUNsYXNzKCdwYXNzZWQtcGFnZScpLnJlbW92ZUNsYXNzKCdjdXJyZW50LXBhZ2UnKTtcbiAgICAgICAgICAgICAgICAkKCR0YXJnZXQpLmFkZENsYXNzKCdjdXJyZW50LXBhZ2UnKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy9jb25zdHJ1Y3RvclxuICAgIGZ1bmN0aW9uIEFua2V0YShlbGVtKSB7XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgICQoJy5hbGVydCcpLmhpZGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBuYW1lQ2hlY2sobmFtZSkge1xuICAgICAgICAgICAgaWYgKG5hbWUgPT0gJycpIHtcbiAgICAgICAgICAgICAgICAkKCcubmFtZScpLmNzcyh7J2JvcmRlcic6ICcxcHggc29saWQgI2ZmMDAwMCd9KTtcbiAgICAgICAgICAgICAgICAkKCcuYWxlcnQtbmFtZScpLnNob3coKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5uYW1lJykuY3NzKHsnYm9yZGVyJzogJzAnfSk7XG4gICAgICAgICAgICAgICAgJCgnLmFsZXJ0LW5hbWUnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBlbWFpbENoZWNrKG1haWwpIHtcbiAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gL15bYS16MC05Xy1dK0BbYS16MC05LV0rXFwuKFthLXpdezEsNn1cXC4pP1thLXpdezIsNn0kL2k7XG5cbiAgICAgICAgICAgIGlmIChtYWlsID09ICcnKSB7XG4gICAgICAgICAgICAgICAgJCgnLmVtYWlsJykuY3NzKHsnYm9yZGVyJzogJzFweCBzb2xpZCAjZmYwMDAwJ30pO1xuICAgICAgICAgICAgICAgICQoJy5hbGVydC1lbWFpbCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5lbWFpbCcpLmNzcyh7J2JvcmRlcic6ICcwJ30pO1xuICAgICAgICAgICAgICAgICQoJy5hbGVydC1lbWFpbCcpLmhpZGUoKTtcblxuICAgICAgICAgICAgICAgIGlmIChtYWlsLnNlYXJjaChwYXR0ZXJuKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5hbGVydC1lbWFpbC13cicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcuZW1haWwnKS5jc3Moeydib3JkZXInOiAnMXB4IHNvbGlkICNmZjAwMDAnfSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5hbGVydC1lbWFpbC13cicpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJCgkKCcuZW1haWwnKSkudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdExvY2F0aW9uKCkge1xuICAgICAgICAgICAgJCgnLm5ldycpLnJlbW92ZSgpO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGNvdW50cmllcykge1xuICAgICAgICAgICAgICAgIGlmIChjb3VudHJpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJG9wdGlvbiA9ICQoJzxvcHRpb24gY2xhc3M9XCJuZXdcIj48L29wdGlvbj4nKTtcbiAgICAgICAgICAgICAgICAgICAgJCgkb3B0aW9uKS52YWwoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgJCgkb3B0aW9uKS5odG1sKGNvdW50cmllc1trZXldKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2NvdW50cnknKS5hcHBlbmQoJG9wdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKCcjY291bnRyeScpLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRzZWxlY3RlZCA9IHRoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdO1xuICAgICAgICAgICAgICAgIHZhciAkY291bnRyeSA9ICQoJHNlbGVjdGVkKS5odG1sKCk7XG5cbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY291bnRyeScsICRjb3VudHJ5KTtcblxuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0ZWRDb3VudHJ5ID0gJCgkc2VsZWN0ZWQpLnZhbCgpO1xuICAgICAgICAgICAgICAgIHZhciAkaXRlbSA9ICQoJyNjaXR5Jyk7XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAoJGl0ZW0uY2hpbGRyZW4oKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICRpdGVtLmNoaWxkcmVuKCkubGFzdCgpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBjaXRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNpdGllcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2l0aWVzW2tleV0uY291bnRyeSA9PSAkc2VsZWN0ZWRDb3VudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRvcHRpb24gPSAkKCc8b3B0aW9uIGNsYXNzPVwibmV3XCI+PC9vcHRpb24+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgkb3B0aW9uKS52YWwoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCRvcHRpb24pLmh0bWwoY2l0aWVzW2tleV0ubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2NpdHknKS5hcHBlbmQoJG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJChcIiNjaXR5XCIpLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRzZWxlY3RlZCA9IHRoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdO1xuICAgICAgICAgICAgICAgIHZhciAkY2l0eSA9ICQoJHNlbGVjdGVkKS5odG1sKCk7XG5cbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2l0eScsICRjaXR5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9jYXRpb25DaGVjaygpIHtcbiAgICAgICAgICAgIGlmICgkKCcjY291bnRyeScpLnZhbCgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAkKCcjY291bnRyeScpLmNzcyh7J2JvcmRlcic6ICcxcHggc29saWQgI2ZmMDAwMCd9KTtcbiAgICAgICAgICAgICAgICAkKCcuYWxlcnQtY291bnRyeScpLnNob3coKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJyNjb3VudHJ5JykuY3NzKHsnYm9yZGVyJzogJzAnfSk7XG4gICAgICAgICAgICAgICAgJCgnLmFsZXJ0LWNvdW50cnknKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKCQoJyNjaXR5JykudmFsKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2l0eScsICfQk9C+0YDQvtC0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc29jaWFsSW5wdXQoKSB7XG4gICAgICAgICAgICAkKCcudGhpcmQnKS5maW5kKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGlkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpO1xuICAgICAgICAgICAgICAgICAgICAkaW5wdXQuYWRkQ2xhc3MoJGlkKTtcbiAgICAgICAgICAgICAgICAgICAgJCgkaW5wdXQpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc29jaWFsSW5wdXRDaGVjaygpIHtcbiAgICAgICAgICAgIHZhciAkZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCQoJ2lucHV0OmNoZWNrZWQnKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICQoJy5pbnB1dC1hbGVydCcpLnNob3coKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLmFsZXJ0JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJ2lucHV0OmNoZWNrZWQnKS5wYXJlbnQoKS5maW5kKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGlucHV0VGV4dCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkaWQgPSAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkaW5wdXRUZXh0ID09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hbGVydC1zb2NpYWwnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHsnYm9yZGVyJzogJzFweCBzb2xpZCAjZmYwMDAwJ30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRhbGVydCA9ICQoJzxzcGFuIGNsYXNzPVwiYWxlcnQgYWxlcnQtc29jaWFsXCI+0J/QvtC70LUg0LTQvtC70LbQvdC+INCx0YvRgtGMINC30LDQv9C+0LvQvdC10L3Qvi48L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFwcGVuZCgkYWxlcnQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3Moeydib3JkZXInOiAnMCd9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmFsZXJ0LXNvY2lhbCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJGlkLCAkaW5wdXRUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICRmbGFnO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW1nQ2hvb3NlKCkge1xuICAgICAgICAgICAgJCgnaW1nJykuY3NzKHsnYm9yZGVyJzogMH0pO1xuICAgICAgICAgICAgJCgnaW1nJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoJ2ltZycpLmNzcyh7J2JvcmRlcic6IDB9KTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyh7J2JvcmRlcic6ICczcHggc29saWQgI2ZmOTgwMCd9KS5hZGRDbGFzcygnY2hvc2VuJyk7XG4gICAgICAgICAgICAgICAgaW1nID0gdGhpcztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW1nQ2hlY2soKSB7XG4gICAgICAgICAgICB2YXIgJGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICgkKCcuY2hvc2VuJykubGVuZ3RoID09IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmICgkKGltZykuaGFzQ2xhc3MoJ2RvZycpKSB7XG4gICAgICAgICAgICAgICAgJCgnLnBpYy1hbGVydCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCdpbWcnKS5yZW1vdmVDbGFzcygnY2hvc2VuJykuY3NzKHsnYm9yZGVyJzogMH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLnBpYy1hbGVydCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB2YXIgcGljSWQgPSAkKGltZykuYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGljSWQnLCBwaWNJZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmZpcnN0Q2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJG5hbWUgPSAkKCcubmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgdmFyICRlbWFpbCA9ICQoJy5lbWFpbCcpLnZhbCgpO1xuICAgICAgICAgICAgaWYgKG5hbWVDaGVjaygkbmFtZSkgJiYgZW1haWxDaGVjaygkZW1haWwpKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ25hbWUnLCAkbmFtZSk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VtYWlsJywgJGVtYWlsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNlY29uZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGVjdExvY2F0aW9uKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zZWNvbmRDaGVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbkNoZWNrKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnRoaXJkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc29jaWFsSW5wdXQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnRoaXJkQ2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgIGlmIChzb2NpYWxJbnB1dENoZWNrKCkpIHtcbiAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZm91cnRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaW1nQ2hvb3NlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5mb3VydGhDaGVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgaWYgKGltZ0NoZWNrKCkpIHtcbiAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZhciAkY3VycmVudCA9ICQoJy5jdXJyZW50LXN0ZXAnKTtcblxuICAgICAgICAgICAgaWYgKCQoJGN1cnJlbnQpLmhhc0NsYXNzKCdzZWNvbmQnKSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdExvY2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgkKCRjdXJyZW50KS5oYXNDbGFzcygndGhpcmQnKSkge1xuICAgICAgICAgICAgICAgIHNvY2lhbElucHV0KCQoJy50aGlyZCcpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCQoJGN1cnJlbnQpLmhhc0NsYXNzKCdmb3VydGgnKSkge1xuICAgICAgICAgICAgICAgIGltZ0Nob29zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2hvd1Jlc3VsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkcmVzdWx0ID0ge307XG4gICAgICAgICAgICAgICAgJHJlc3VsdC5uYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ25hbWUnKTtcbiAgICAgICAgICAgICAgICAkcmVzdWx0LmVtYWlsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyk7XG4gICAgICAgICAgICAgICAgJHJlc3VsdC5jb3VudHJ5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NvdW50cnknKTtcbiAgICAgICAgICAgICAgICAkcmVzdWx0LmNpdHkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2l0eScpO1xuICAgICAgICAgICAgICAgICRyZXN1bHQuc29jaWFsID0gW107XG4gICAgICAgICAgICAgICAgJHJlc3VsdC5waWMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGljSWQnKTtcbiAgICAgICAgICAgIHZhciBjaGVja2VkID0gJCgnLnRoaXJkJykuZmluZCgnaW5wdXQ6Y2hlY2tlZCcpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZWNrZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSAkKGNoZWNrZWRbaV0pLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAgICAgJHJlc3VsdC5zb2NpYWxbaV0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKCcud3JhcHBlcicpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJy5yZXN1bHRzJykuY3NzKHsnZGlzcGxheSc6ICdibG9jayd9KTtcbiAgICAgICAgICAgIHZhciAkcHJvZmlsZSA9ICQoJzxkaXYgY2xhc3M9XCJwcm9maWxlXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAkKCcucmVzdWx0cycpLmFwcGVuZCgkcHJvZmlsZSk7XG4gICAgICAgICAgICB2YXIgJHByb2ZpbGVXcmFwcGVyID0gJCgnPGRpdiBjbGFzcz1cInByb2ZpbGUtd3JhcHBlclwiPjwvZGl2PicpO1xuXG4gICAgICAgICAgICAkcHJvZmlsZS5hcHBlbmQoJHByb2ZpbGVXcmFwcGVyKTtcbiAgICAgICAgICAgICRwcm9maWxlV3JhcHBlci5hcHBlbmQoJCgnPGgxPicgKyAkcmVzdWx0Lm5hbWUgKyAnPC9oMT4nKSk7XG4gICAgICAgICAgICAkcHJvZmlsZVdyYXBwZXIuYXBwZW5kKCQoJzxwIGNsYXNzPVwiZW1haWxcIj4nICsgJHJlc3VsdC5lbWFpbCArICc8L3A+JykpO1xuICAgICAgICAgICAgJHByb2ZpbGVXcmFwcGVyLmFwcGVuZCgkKCc8cCBjbGFzcz1cImxvY2F0aW9uXCI+JyArICRyZXN1bHQuY2l0eSArICcsICcgKyAkcmVzdWx0LmNvdW50cnkgKyAnPC9wPicpKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkcmVzdWx0LnNvY2lhbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICRwcm9maWxlV3JhcHBlci5hcHBlbmQoJCgnPHAgY2xhc3M9XCJzb2NpYWxcIj4nICsgJzxzcGFuIGNsYXNzPVwic29jaWFsLW5hbWVcIj4nICsgJChjaGVja2VkW2ldKS5hdHRyKCdpZCcpICsgJzogPC9zcGFuPicgKyAkcmVzdWx0LnNvY2lhbFtpXSArICc8cD4nKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRwcm9maWxlLmFwcGVuZCgkKCc8aW1nIHNyYz1cImltZy8nICsgJHJlc3VsdC5waWMgKyAnLmpwZ1wiIGNsYXNzPVwicGljXCI+JykpO1xuICAgICAgICAgICAgdmFyICRyZXNldCA9ICQoJzxidXR0b24gY2xhc3M9XCJyZXNldFwiPtCf0YDQvtC50YLQuCDQt9Cw0L3QvtCy0L48L2J1dHRvbj4nKTtcbiAgICAgICAgICAgICQoJy5yZXN1bHRzJykuYXBwZW5kKCRyZXNldCk7XG4gICAgICAgICAgICAkcmVzZXQub25lKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzZXQnKTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAkcHJvZmlsZS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkcmVzZXQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnLnJlc3VsdHMnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLndyYXBwZXInKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJCgnLm5leHQnKS5odG1sKCfQodC70LXQtNGD0Y7RidC40LkgPicpLnJlbW92ZUNsYXNzKCdmaW5pc2gnKTtcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbdHlwZT1cImVtYWlsXCJdJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICQoJy5mb3VydGgnKS5yZW1vdmVDbGFzcygnY3VycmVudC1zdGVwJyk7XG4gICAgICAgICAgICAgICAgJCgnLmZpcnN0JykuYWRkQ2xhc3MoJ2N1cnJlbnQtc3RlcCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCcucGFnZScpLnJlbW92ZUNsYXNzKCdwYXNzZWQtcGFnZScpLnJlbW92ZUNsYXNzKCdjdXJyZW50LXBhZ2UnKTtcbiAgICAgICAgICAgICAgICAkKCcucGFnZTpmaXJzdC1jaGlsZCcpLmFkZENsYXNzKCdjdXJyZW50LXBhZ2UnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
